@using GROBS.App_Code
@using GROBS.Models
@using X.PagedList
@using X.PagedList.Mvc
@{
    ViewBag.Title = "指标";
    Layout = "~/Views/Shared/_LayoutCustomer02.cshtml";
}
<script type="text/javascript">
    $(document).ready(function () {
        formatBoolToCHinese();//格式化是否

        //导出
        $("#btn_export").on("click", function () {
            var _req_YF = $("#req_YF").val();
            var _req_FLType = $("#req_FLType").val();
            window.open("/ord_jixiao/customerTargetNowExport?Yuefen=" + _req_YF + "&" + "FafangSF=" + _req_FLType, "_self");
        });

        //查询
        $("#btn_search").on("click", function () {
            var _req_YF = $("#req_YF").val();
            var _req_FLType = $("#req_FLType").val();

        });

    });
    //格式化是否
    function formatBoolToCHinese() {
        $("#table_thisYearJiXiao").find("tr").each(function () {
            var boolT_F = $(this).find(".faFangSF").html();
            if (boolT_F == "true" || boolT_F == "True") {
                $(this).find(".faFangSF").html("是");
            } else {
                $(this).find(".faFangSF").html("否");
            }
        });
    }


</script>


<div class="page-content">
    <input type="hidden" id="khid" value="@ViewBag.khid" />
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="panel">
                    <div class="panel-body">
                        @*客户信息*@
                        <div class="row">
                            <div class="col-sm-12" style="font-size:18px;">
                                <i class="icon-signal green bigger-300"></i>&nbsp;&nbsp;
                                <b>@Html.GetDataValue_ID("收货单位", "", (int)(ViewBag.khid == null ? 0 : ViewBag.khid))</b>&nbsp;&nbsp;&nbsp;&nbsp;
                                <b class="orange" style="font-size:28px;"><span id="totalPrice">@ViewBag.thisYear</span>年</b>&nbsp;&nbsp;&nbsp;&nbsp;
                            </div>
                        </div>
                        <hr />
                        <div class="clearfix">
                            <div class="form-group col-sm-3">
                                <label for="req_YF" class="col-sm-4 control-label"><b>月份</b></label>
                                <div class="col-sm-8">
                                    <select id="req_YF" name="req_YF" class="form-control">
                                        <option value="">-全部-</option>
                                        <option value="01">01</option>
                                        <option value="02">02</option>
                                        <option value="03">03</option>
                                        <option value="04">04</option>
                                        <option value="05">05</option>
                                        <option value="06">06</option>
                                        <option value="07">07</option>
                                        <option value="08">08</option>
                                        <option value="09">09</option>
                                        <option value="10">10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group col-sm-5">
                                <label for="req_FLType" class="col-sm-3 control-label"><b>返利是否发放</b></label>
                                <div class="col-sm-5">
                                    <select id="req_FLType" name="req_FLType" class="form-control">
                                        <option value="">-全部-</option>
                                        <option value="False">否</option>
                                        <option value="True">是</option>
                                    </select>
                                </div>
                            </div>
                            <div class="pull-right">
                                <b>
                                    <button type="button" id="btn_search" class="btn btn-white "><i class="icon-search green"></i><b>查询</b></button>
                                    <button type="button" id="btn_export" class="btn btn-white"><i class="icon-inbox green"></i><b>导出</b></button>
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <a href="/ord_jixiao/customertarget">查看所有记录</a>
                                </b>&nbsp;&nbsp;<i class="icon-double-angle-right bigger" -160></i>
                            </div>
                        </div>
                        <div class="space-2"></div>
                        @*列表*@
                        <table class="table table-bordered table-hover" id="table_thisYearJiXiao">
                            <tr>
                                <th>月份</th>
                                <th>目标(元)</th>
                                <th>业绩</th>
                                <th>达成率</th>
                                <th>返利申请金额</th>
                                <th>返利发放金额</th>
                                <th>返利是否发放</th>
                            </tr>
                            <tbody>
                                @foreach (var item in ViewBag.thisYearDate)
                                {
                                    <tr>
                                        <td style="display:none;">
                                            <label><input type="checkbox" value="@item.ID"></label>
                                        </td>
                                        <td>@item.Yuefen</td>
                                        <td>@String.Format("{0:N}", item.Zhibiao)</td>
                                        <td>@String.Format("{0:N}", item.Yeji == null ? "" : item.Yeji)</td>
                                        <td>@item.Dachenglv</td>
                                        <td>@String.Format("{0:N}", item.FLSQJE == null ? "" : item.FLSQJE)</td>
                                        <td>@String.Format("{0:N}", item.FLFFJE == null ? "" : item.FLFFJE)</td>
                                        <td class="faFangSF">@item.FafangSF</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

